<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KI Markt Analyse 2026</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{background:#0f1115;color:#e7fdf9;font-family:system-ui;margin:0;padding:12px}
h1{text-align:center;font-size:1.4rem;margin:6px 0}
small{text-align:center;display:block;color:#9cc}
select,button{width:100%;padding:14px;margin-top:10px;font-size:1rem;border-radius:12px;border:1px solid #00ccaa;background:#141822;color:#e7fdf9}
button:disabled{opacity:.6}
.status{text-align:center;margin-top:8px;font-weight:bold}
.hint{text-align:center;font-size:.85rem;color:#9cc}
.progress{height:7px;background:#1e2433;border-radius:4px;overflow:hidden;margin-top:6px}
.progress div{height:100%;width:0%;background:#00ccaa;transition:.3s}
.box{background:#141822;border:1px solid #00ccaa;border-radius:12px;padding:10px;margin-top:10px}
.valueBox{display:flex;justify-content:space-between;margin-top:8px;font-weight:bold}
canvas{margin-top:12px;background:#111;border-radius:12px}
</style>
</head>

<body>

<h1>üß† KI Markt Analyse 2026</h1>
<small>Marktverst√§ndnis ¬∑ Status ¬∑ Zukunftsbewertung</small>

<select id="stock"></select>
<button id="analyzeBtn">üîç Analyse starten</button>

<div class="status" id="marketStatus">Marktstatus‚Ä¶</div>
<div class="hint" id="countdown"></div>
<div class="status" id="status">Bereit</div>

<div class="progress"><div id="bar"></div></div>

<div class="box">
  <div class="valueBox">
    <span>Aktueller Wert:</span>
    <span id="currentPrice">‚Äì</span>
  </div>
  <div class="valueBox">
    <span>Zuk√ºnftiger Status-Wert:</span>
    <span id="futurePrice">‚Äì</span>
  </div>
</div>

<canvas id="chart" height="260"></canvas>

<div class="box">
<b>KI-Analyse</b>
<div id="info">‚Äì</div>
</div>

<script>
/* ================= AKTIEN ================= */
const STOCKS=[
 ["AAPL","Apple"],["MSFT","Microsoft"],["NVDA","NVIDIA"],
 ["TSLA","Tesla"],["AMZN","Amazon"],["GOOGL","Alphabet"],
 ["SAP","SAP"],["ASML","ASML"],["NESN","Nestl√©"],["ROG","Roche"],["ABB","ABB"]
];
const stockSel=document.getElementById("stock");
STOCKS.forEach(s=>{
 const o=document.createElement("option");
 o.value=s[0]; o.textContent=s[0]+" ‚Äì "+s[1];
 stockSel.appendChild(o);
});

/* ================= MARKTZEITEN ================= */
function getMarket(sym){
 return ["SAP","ASML","NESN","ROG","ABB"].includes(sym)?"EU":"US";
}
function marketTimes(){
 const m=getMarket(stockSel.value);
 const n=new Date(),d=n.getDay();
 const h=n.getHours()+n.getMinutes()/60;
 if(d===0||d===6) return {open:false,next:"Montag",market:m};
 if(m==="EU"){
  if(h>=9&&h<17.5) return {open:true,closeIn:17.5-h,market:m};
  if(h<9) return {open:false,openIn:9-h,market:m};
  return {open:false,next:"Morgen 09:00",market:m};
 }
 if(h>=15.5&&h<22) return {open:true,closeIn:22-h,market:m};
 if(h<15.5) return {open:false,openIn:15.5-h,market:m};
 return {open:false,next:"Morgen 15:30",market:m};
}
function updateMarket(){
 const m=marketTimes();
 marketStatus.textContent=(m.open?"üü¢ Offen":"üî¥ Geschlossen")+" ("+m.market+")";
 countdown.textContent=m.open
  ?`Schlie√üt in ${Math.round(m.closeIn*60)} Min`
  :m.openIn?`√ñffnet in ${Math.round(m.openIn*60)} Min`
  :`N√§chste √ñffnung: ${m.next}`;
}
setInterval(updateMarket,30000);
updateMarket();
stockSel.addEventListener("change",updateMarket);

/* ================= CHART ================= */
let chart;
function drawChart(p){
 if(chart) chart.destroy();
 chart=new Chart(document.getElementById("chart"),{
  type:"line",
  data:{labels:p.map((_,i)=>i),
    datasets:[{data:p,borderColor:"#00ccaa",tension:.3}]},
  options:{plugins:{legend:{display:false}},responsive:true}
 });

/* ======= HIER KOMMT TEIL 2 HIN ======= */
}

/* ================= KI-DATEN ================= */
function generateMarketData(){
 const base=100+Math.random()*50;
 let p=[base];
 for(let i=0;i<50;i++){
  p.push(p[i]+(Math.random()-0.5)*2);
 }
 return p;
}

/* ================= KI-ANALYSE ================= */
function KI_ANALYSE(p){
 const n=p.length-1;
 const trend=p[n]-p[n-12];
 const vol=Math.abs(p[n]-p[n-5])/p[n];

 const structure=trend>1?"Aufbauend":trend<-1?"Abbauend":"Seitw√§rts";
 const timeQuality=vol<0.025?"Sehr gut":vol<0.05?"Mittel":"Schlecht";
 const calm=Math.max(0,100-(vol*900));

 // Zukunfts-Status-Wert (kein Signal!)
 let factor=1;
 if(structure==="Aufbauend") factor+=0.02;
 if(timeQuality==="Sehr gut") factor+=0.015;
 if(calm>70) factor+=0.01;

 const future=(p[n]*factor).toFixed(2);

 return{
  structure,
  timeQuality,
  calm,
  current:p[n].toFixed(2),
  future
 };
}

/* ================= ANALYSE ================= */
const bar=document.getElementById("bar");
const status=document.getElementById("status");
const info=document.getElementById("info");
const btn=document.getElementById("analyzeBtn");
const currentPrice=document.getElementById("currentPrice");
const futurePrice=document.getElementById("futurePrice");

function progress(p){bar.style.width=p+"%";}

btn.onclick=async()=>{
 btn.disabled=true;
 status.textContent="Analyse l√§uft‚Ä¶";
 progress(25);

 await new Promise(r=>setTimeout(r,300)); // Anti-Freeze

 const data=generateMarketData();
 drawChart(data);
 progress(65);

 const r=KI_ANALYSE(data);

 currentPrice.textContent = r.current;
 futurePrice.textContent  = r.future;

 info.innerHTML=`
 <b>Marktstruktur:</b> ${r.structure}<br>
 <b>Zeit-Qualit√§t:</b> ${r.timeQuality}<br>
 <b>Markt-Ruhe-Index:</b> ${Math.round(r.calm)}%
 `;

 progress(100);
 status.textContent="‚úÖ Analyse abgeschlossen";
 btn.disabled=false;
};

</script>
</body>
</html>
